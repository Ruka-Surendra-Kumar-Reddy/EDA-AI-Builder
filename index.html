<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered EDA Library Generator</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header__content">
                <h1>AI-Powered EDA Library Generator</h1>
                <p class="header__subtitle">Generate KiCad symbols & footprints from datasheets using Gemini AI</p>
            </div>
        </header>

        <!-- Main Content Grid -->
        <div class="main-grid">
            <!-- Left Column: Controls & Chat -->
            <div class="left-column">
                <!-- Input Section -->
                <section class="card input-section">
                    <div class="card__body">
                        <h2>Component Input</h2>
                        <form id="componentForm" class="component-form">
                            <div class="form-group">
                                <label for="partNumber" class="form-label">Component Name / Part Number</label>
                                <div class="input-group">
                                    <input type="text" id="partNumber" class="form-control part-input"
                                        placeholder="e.g., STM32F407VGT6" required>
                                    <button type="submit" class="btn btn--primary" id="generateBtn">
                                        <span class="btn-text">Generate</span>
                                        <span class="btn-loader hidden">‚ö°</span>
                                    </button>
                                </div>
                                <div class="part-suggestions">
                                    <span class="suggestion-label">Try:</span>
                                    <div class="suggestion-tags" id="sampleParts"></div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edaSoftware" class="form-label">EDA Software</label>
                                    <select id="edaSoftware" class="form-control" required>
                                        <option value="">Select Software</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="modelSelect" class="form-label">AI Model</label>
                                    <select id="modelSelect" class="form-control"></select>
                                </div>
                            </div>

                            <!-- Collapsible Settings -->
                            <div class="settings-toggle">
                                <button type="button" class="btn btn--sm btn--outline" id="toggleSettings">
                                    ‚öôÔ∏è Settings & API Key
                                </button>
                            </div>
                            <div class="settings-panel hidden" id="settingsPanel">
                                <div class="form-group">
                                    <label for="apiKey" class="form-label">Gemini API Key</label>
                                    <div class="api-key-input">
                                        <input type="password" id="apiKey" class="form-control"
                                            placeholder="Enter API Key">
                                        <button type="button" class="btn-toggle-api" id="toggleApiKey">üëÅÔ∏è</button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="packageType" class="form-label">Package Type (Hint)</label>
                                    <select id="packageType" class="form-control"></select>
                                </div>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Chat & Datasheet Section -->
                <section class="card chat-section">
                    <div class="card__header">
                        <h3>AI Assistant & Datasheet</h3>
                    </div>
                    <div class="card__body chat-body">
                        <!-- File Upload Zone -->
                        <div class="upload-zone" id="uploadZone">
                            <input type="file" id="datasheetInput" accept=".pdf" hidden>
                            <div class="upload-content">
                                <span class="upload-icon">üìÑ</span>
                                <p class="upload-text">Drag & drop datasheet PDF or click to upload</p>
                                <p class="upload-subtext">AI will analyze the file for accurate generation</p>
                            </div>
                            <div class="file-info hidden" id="fileInfo">
                                <span class="file-name">datasheet.pdf</span>
                                <button type="button" class="btn-remove-file" id="removeFile">‚úï</button>
                            </div>
                        </div>

                        <!-- Chat Messages -->
                        <div class="chat-messages" id="chatMessages">
                            <div class="message message--ai">
                                <div class="message__avatar">ü§ñ</div>
                                <div class="message__content">
                                    Hello! I'm your EDA Assistant. Upload a datasheet or enter a component name, and
                                    I'll help you generate symbols, footprints, and answer technical questions.
                                </div>
                            </div>
                        </div>

                        <!-- Chat Input -->
                        <div class="chat-input-area">
                            <textarea id="chatInput" class="form-control chat-textarea"
                                placeholder="Ask about the datasheet or request changes..." rows="1"></textarea>
                            <button type="button" class="btn btn--primary btn--icon" id="sendMessageBtn">
                                üì§
                            </button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right Column: Preview & Results -->
            <div class="right-column">
                <section class="card preview-section">
                    <div class="card__header preview-header">
                        <h3>Library Preview</h3>
                        <div class="preview-controls">
                            <div class="preview-tabs">
                                <button class="tab-btn active" data-tab="symbol">Symbol</button>
                                <button class="tab-btn" data-tab="footprint">Footprint</button>
                            </div>
                            <button class="btn btn--sm btn--outline" id="downloadBtn" disabled>
                                üì¶ Download
                            </button>
                        </div>
                    </div>
                    <div class="card__body preview-body">
                        <div class="preview-canvas-container" id="previewContainer">
                            <div class="preview-placeholder">
                                <span class="preview-icon">‚ö°</span>
                                <p>Generated content will appear here</p>
                            </div>
                            <canvas id="previewCanvas" class="hidden"></canvas>
                        </div>
                        <div class="generation-status hidden" id="generationStatus">
                            <div class="status-step" id="statusStep1">üîç Analyzing...</div>
                            <div class="status-step" id="statusStep2">üìê Extracting Dimensions...</div>
                            <div class="status-step" id="statusStep3">‚ö° Generating Symbol...</div>
                            <div class="status-step" id="statusStep4">üî≤ Generating Footprint...</div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="js/gemini-client.js"></script>
    <script src="app.js"></script>
</body>

</html>